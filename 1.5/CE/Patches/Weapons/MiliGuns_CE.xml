<?xml version="1.0" encoding="utf-8"?>

<Patch>
    <Operation Class="PatchOperationSequence">
        <operations>

            <!--givetoughness to mech weapon (tungsteel stronk)-->

            <li Class="PatchOperationAdd">
                <xpath>Defs/ThingDef[@Name="DMS_AutomatroidGun"]/statBases</xpath>
                <value>
                    <ToughnessRating>6</ToughnessRating>
                </value>
            </li>

            <li Class="PatchOperationAdd">
                <xpath>Defs/ThingDef[defName="DMS_StunBaton" or
                                     defName="DMS_Machete" or
                                     defName="DMS_DoorBreaker"
                                    ]/statBases</xpath>
                <value>
                    <ToughnessRating>10</ToughnessRating>
                </value>
            </li>


            <!--Remove speed penalty-->
            <li Class="PatchOperationRemove">
                <xpath>Defs/ThingDef[defName="DMS_SemiAutoRifle" or
                    defName="DMS_AntiMaterialRifle" or
                    defName="DMS_SniperCannon" or
                    defName="DMS_AutomaticGrenadeLauncher" or
                    defName="DMS_LightMachineGun" or
                    defName="DMS_HeavyMachineGun" or
                    defName="DMS_Autocannon" or
                    defName="DMS_DoorBreaker"
                    ]/equippedStatOffsets/MoveSpeed</xpath>
            </li>

            <!--=====Patch tools(except pistol) =====-->
            <li Class="PatchOperationReplace">
                <xpath>Defs/ThingDef[@Name="DMS_AutomatroidGun"]/tools</xpath>
                <value>
                    <tools>
                        <li Class="CombatExtended.ToolCE">
                            <label>stock</label>
                            <capacities>
                                <li>Blunt</li>
                            </capacities>
                            <power>12</power>
                            <cooldownTime>1.55</cooldownTime>
                            <chanceFactor>1.5</chanceFactor>
                            <armorPenetrationBlunt>3.955</armorPenetrationBlunt>
                            <linkedBodyPartsGroup>Stock</linkedBodyPartsGroup>
                        </li>
                        <li Class="CombatExtended.ToolCE">
                            <label>barrel</label>
                            <capacities>
                                <li>Blunt</li>
                            </capacities>
                            <power>8</power>
                            <cooldownTime>2.02</cooldownTime>
                            <armorPenetrationBlunt>2.730</armorPenetrationBlunt>
                            <linkedBodyPartsGroup>Barrel</linkedBodyPartsGroup>
                        </li>
                        <li Class="CombatExtended.ToolCE">
                            <label>muzzle</label>
                            <capacities>
                                <li>Poke</li>
                            </capacities>
                            <power>12</power>
                            <cooldownTime>1.55</cooldownTime>
                            <armorPenetrationBlunt>3.955</armorPenetrationBlunt>
                            <linkedBodyPartsGroup>Muzzle</linkedBodyPartsGroup>
                        </li>
                    </tools>
                </value>
            </li>

            <!--=====TaticalPistol =====-->
            <li Class="PatchOperationReplace">
                <xpath>Defs/ThingDef[defName="DMS_TaticalPistol"]/tools</xpath>
                <value>
                    <tools Inherit="False">
                        <li Class="CombatExtended.ToolCE">
                            <label>grip</label>
                            <capacities>
                                <li>Blunt</li>
                            </capacities>
                            <power>3</power>
                            <cooldownTime>1.54</cooldownTime>
                            <chanceFactor>1.5</chanceFactor>
                            <armorPenetrationBlunt>0.755</armorPenetrationBlunt>
                            <linkedBodyPartsGroup>Grip</linkedBodyPartsGroup>
                        </li>
                        <li Class="CombatExtended.ToolCE">
                            <label>muzzle</label>
                            <capacities>
                                <li>Poke</li>
                            </capacities>
                            <power>3</power>
                            <cooldownTime>1.54</cooldownTime>
                            <armorPenetrationBlunt>0.755</armorPenetrationBlunt>
                            <linkedBodyPartsGroup>Muzzle</linkedBodyPartsGroup>
                        </li>
                    </tools>
                </value>
            </li>
            <li Class="CombatExtended.PatchOperationMakeGunCECompatible">
                <defName>DMS_TaticalPistol</defName>
                <statBases>
                    <WorkToMake>8600</WorkToMake>
                    <Mass>2.43</Mass>
                    <Bulk>3.7</Bulk>
                    <SwayFactor>1.59</SwayFactor>
                    <ShotSpread>0.18</ShotSpread>
                    <SightsEfficiency>0.85</SightsEfficiency>
                    <RangedWeapon_Cooldown>0.41</RangedWeapon_Cooldown>
                </statBases>
                <Properties>
                    <verbClass>CombatExtended.Verb_ShootCE</verbClass>
                    <hasStandardCommand>true</hasStandardCommand>
                    <defaultProjectile>Bullet_50AE_FMJ</defaultProjectile>
                    <warmupTime>0.35</warmupTime>
                    <range>15</range>
                    <soundCast>DMS_Pistol_Shot</soundCast>
                    <soundCastTail>GunTail_Light</soundCastTail>
                    <muzzleFlashScale>9</muzzleFlashScale>
                    <recoilAmount>3.1</recoilAmount>
                </Properties>
                <AmmoUser>
                    <magazineSize>12</magazineSize>
                    <reloadTime>2</reloadTime>
                    <ammoSet>AmmoSet_50AE</ammoSet>
                </AmmoUser>
                <FireModes>
                    <aiAimMode>Snapshot</aiAimMode>
                </FireModes>
                <weaponTags>
                    <li>CE_OneHandedWeapon</li>
                    <li>CE_AI_Pistol</li>
                </weaponTags>
            </li>

            <!--===== PDW =====-->
            <li Class="CombatExtended.PatchOperationMakeGunCECompatible">
                <defName>DMS_PDW</defName>
                <statBases>
                    <WorkToMake>20000</WorkToMake>
                    <Mass>4.3</Mass>
                    <Bulk>5</Bulk>
                    <SwayFactor>1.76</SwayFactor>
                    <ShotSpread>0.19</ShotSpread>
                    <SightsEfficiency>0.75</SightsEfficiency>
                    <RangedWeapon_Cooldown>0.41</RangedWeapon_Cooldown>
                </statBases>
                <Properties>
                    <verbClass>CombatExtended.Verb_ShootCE</verbClass>
                    <hasStandardCommand>true</hasStandardCommand>
                    <defaultProjectile>Bullet_50AE_FMJ</defaultProjectile>
                    <warmupTime>0.35</warmupTime>
                    <range>17</range>
                    <burstShotCount>3</burstShotCount>
                    <ticksBetweenBurstShots>5</ticksBetweenBurstShots>
                    <soundCast>DMS_Pistol_Shot</soundCast>
                    <soundCastTail>GunTail_Light</soundCastTail>
                    <muzzleFlashScale>9</muzzleFlashScale>
                    <recoilAmount>2.24</recoilAmount>
                </Properties>
                <AmmoUser>
                    <magazineSize>21</magazineSize>
                    <reloadTime>3</reloadTime>
                    <ammoSet>AmmoSet_50AE</ammoSet>
                </AmmoUser>
                <FireModes>
                    <aiUseBurstMode>true</aiUseBurstMode>
                    <aiAimMode>Snapshot</aiAimMode>
                    <aimedBurstShotCount>2</aimedBurstShotCount>
                </FireModes>
                <weaponTags>
                    <li>CE_OneHandedWeapon</li>
                    <li>CE_AI_Pistol</li>
                </weaponTags>
            </li>
            <li Class="PatchOperationAdd">
                <xpath>Defs/ThingDef[defName="DMS_PDW"]</xpath>
                <value>
                    <tools Inherit="False">
                        <li Class="CombatExtended.ToolCE">
                            <label>grip</label>
                            <capacities>
                                <li>Blunt</li>
                            </capacities>
                            <power>3</power>
                            <cooldownTime>1.54</cooldownTime>
                            <chanceFactor>1.5</chanceFactor>
                            <armorPenetrationBlunt>0.755</armorPenetrationBlunt>
                            <linkedBodyPartsGroup>Grip</linkedBodyPartsGroup>
                        </li>
                        <li Class="CombatExtended.ToolCE">
                            <label>muzzle</label>
                            <capacities>
                                <li>Poke</li>
                            </capacities>
                            <power>3</power>
                            <cooldownTime>1.54</cooldownTime>
                            <armorPenetrationBlunt>0.755</armorPenetrationBlunt>
                            <linkedBodyPartsGroup>Muzzle</linkedBodyPartsGroup>
                        </li>
                    </tools>
                </value>
            </li>

            <!--===== AssaultPiercer =====-->
            <li Class="CombatExtended.PatchOperationMakeGunCECompatible">
                <defName>DMS_AssaultPiercer</defName>
                <statBases>
                    <WorkToMake>45000</WorkToMake>
                    <Mass>5.12</Mass>
                    <Bulk>6.7</Bulk>
                    <SwayFactor>1.41</SwayFactor>
                    <ShotSpread>0.17</ShotSpread>
                    <SightsEfficiency>0.85</SightsEfficiency>
                    <RangedWeapon_Cooldown>0.3</RangedWeapon_Cooldown>
                </statBases>
                <Properties>
                    <verbClass>CombatExtended.Verb_ShootCE</verbClass>
                    <hasStandardCommand>true</hasStandardCommand>
                    <defaultProjectile>Bullet_338Lapua_FMJ</defaultProjectile>
                    <warmupTime>0.75</warmupTime>
                    <range>25</range>
                    <burstShotCount>6</burstShotCount>
                    <ticksBetweenBurstShots>7</ticksBetweenBurstShots>
                    <soundCast>Shot_Autocannon</soundCast>
                    <soundCastTail>GunTail_Heavy</soundCastTail>
                    <recoilAmount>1.89</recoilAmount>
                    <muzzleFlashScale>9</muzzleFlashScale>
                </Properties>
                <AmmoUser>
                    <magazineSize>18</magazineSize>
                    <reloadTime>4</reloadTime>
                    <ammoSet>AmmoSet_338Lapua</ammoSet>
                </AmmoUser>
                <FireModes>
                    <aiUseBurstMode>true</aiUseBurstMode>
                    <aiAimMode>Snapshot</aiAimMode>
                    <aimedBurstShotCount>3</aimedBurstShotCount>
                </FireModes>
            </li>
            <li Class="PatchOperationAdd">
                <xpath>Defs/ThingDef[defName="DMS_AssaultPiercer"]</xpath>
                <value>
                    <tools Inherit="False">
                        <li Class="CombatExtended.ToolCE">
                            <label>grip</label>
                            <capacities>
                                <li>Blunt</li>
                            </capacities>
                            <power>3</power>
                            <cooldownTime>1.54</cooldownTime>
                            <chanceFactor>1.5</chanceFactor>
                            <armorPenetrationBlunt>0.755</armorPenetrationBlunt>
                            <linkedBodyPartsGroup>Grip</linkedBodyPartsGroup>
                        </li>
                        <li Class="CombatExtended.ToolCE">
                            <label>muzzle</label>
                            <capacities>
                                <li>Poke</li>
                            </capacities>
                            <power>3</power>
                            <cooldownTime>1.54</cooldownTime>
                            <armorPenetrationBlunt>0.755</armorPenetrationBlunt>
                            <linkedBodyPartsGroup>Muzzle</linkedBodyPartsGroup>
                        </li>
                    </tools>
                </value>
            </li>

            <!--===== AssaultShotgun =====-->
            <li Class="CombatExtended.PatchOperationMakeGunCECompatible">
                <defName>DMS_AssaultShotgun</defName>
                <statBases>
                    <Mass>8.95</Mass>
                    <Bulk>11.2</Bulk>
                    <SwayFactor>1.41</SwayFactor>
                    <ShotSpread>0.15</ShotSpread>
                    <SightsEfficiency>1.0</SightsEfficiency>
                    <RangedWeapon_Cooldown>0.75</RangedWeapon_Cooldown>
                </statBases>
                <Properties>
                    <verbClass>CombatExtended.Verb_ShootCE</verbClass>
                    <hasStandardCommand>true</hasStandardCommand>
                    <defaultProjectile>Bullet_12Gauge_Buck</defaultProjectile>
                    <warmupTime>0.6</warmupTime>
                    <range>17</range>
                    <burstShotCount>3</burstShotCount>
                    <ticksBetweenBurstShots>15</ticksBetweenBurstShots>
                    <soundCast>Shot_Shotgun</soundCast>
                    <soundCastTail>GunTail_Heavy</soundCastTail>
                    <muzzleFlashScale>9</muzzleFlashScale>
                    <recoilAmount>2.89</recoilAmount>
                </Properties>
                <AmmoUser>
                    <magazineSize>24</magazineSize>
                    <reloadTime>6</reloadTime>
                    <ammoSet>AmmoSet_12Gauge</ammoSet>
                </AmmoUser>
                <FireModes>
                    <aiAimMode>Snapshot</aiAimMode>
                    <aimedBurstShotCount>2</aimedBurstShotCount>
                </FireModes>
                <weaponTags>
                    <li>CE_AI_AssaultWeapon</li>
                </weaponTags>
            </li>

            <!--===== DMS_AssaultRifle =====-->
            <li Class="CombatExtended.PatchOperationMakeGunCECompatible">
                <defName>DMS_AssaultRifle</defName>
                <statBases>
                    <Mass>8.15</Mass>
                    <Bulk>10.85</Bulk>
                    <SwayFactor>1.57</SwayFactor>
                    <ShotSpread>0.09</ShotSpread>
                    <SightsEfficiency>1.2</SightsEfficiency>
                    <RangedWeapon_Cooldown>0.35</RangedWeapon_Cooldown>
                </statBases>
                <Properties>
                    <verbClass>CombatExtended.Verb_ShootCE</verbClass>
                    <hasStandardCommand>true</hasStandardCommand>
                    <defaultProjectile>Bullet_338Lapua_FMJ</defaultProjectile>
                    <warmupTime>1.1</warmupTime>
                    <range>55</range>
                    <burstShotCount>6</burstShotCount>
                    <ticksBetweenBurstShots>8</ticksBetweenBurstShots>
                    <soundCast>Shot_AssaultRifle</soundCast>
                    <soundCastTail>GunTail_Medium</soundCastTail>
                    <muzzleFlashScale>9</muzzleFlashScale>
                    <recoilAmount>1.77</recoilAmount>
                </Properties>
                <AmmoUser>
                    <magazineSize>30</magazineSize>
                    <reloadTime>4.2</reloadTime>
                    <ammoSet>AmmoSet_338Lapua</ammoSet>
                </AmmoUser>
                <FireModes>
                    <aiUseBurstMode>TRUE</aiUseBurstMode>
                    <aiAimMode>AimedShot</aiAimMode>
                    <aimedBurstShotCount>3</aimedBurstShotCount>
                </FireModes>
                <weaponTags>
                    <li>CE_AI_AR</li>
                </weaponTags>
            </li>


            <!--===== Marksman Rifle =====-->
            <li Class="CombatExtended.PatchOperationMakeGunCECompatible">
                <defName>DMS_MarksmanRifle</defName>
                <statBases>
                    <Mass>10.04</Mass>
                    <Bulk>12.37</Bulk>
                    <SwayFactor>1.37</SwayFactor>
                    <ShotSpread>0.03</ShotSpread>
                    <SightsEfficiency>2.85</SightsEfficiency>
                    <RangedWeapon_Cooldown>1.16</RangedWeapon_Cooldown>
                </statBases>
                <Properties>
                    <verbClass>CombatExtended.Verb_ShootCE</verbClass>
                    <hasStandardCommand>true</hasStandardCommand>
                    <defaultProjectile>Bullet_338Lapua_FMJ</defaultProjectile>
                    <warmupTime>2.5</warmupTime>
                    <range>86</range>
                    <soundCast>Shot_AssaultRifle</soundCast>
                    <soundCastTail>GunTail_Medium</soundCastTail>
                    <muzzleFlashScale>9</muzzleFlashScale>
                    <recoilAmount>1.86</recoilAmount>
                </Properties>
                <AmmoUser>
                    <magazineSize>15</magazineSize>
                    <reloadTime>4</reloadTime>
                    <ammoSet>AmmoSet_338Lapua</ammoSet>
                </AmmoUser>
                <FireModes>
                    <aiAimMode>AimedShot</aiAimMode>
                </FireModes>
                <weaponTags>
                    <li>Bipod_Rifle</li>
                    <li>CE_AI_SR</li>
                </weaponTags>
            </li>

            <li Class="PatchOperationReplace">
                <xpath>Defs/ThingDef[defName="DMS_MarksmanRifle"]/modExtensions/li[@Class="DMS.HeavyEquippableExtension"]</xpath>
                <value>
                    <li Class="DMS.HeavyEquippableExtension">
                        <EquippableDef>AverageHumanCanUse</EquippableDef>
                    </li>
                </value>
            </li>

            <!--===== Semi-auto Rifle =====-->
            <li Class="CombatExtended.PatchOperationMakeGunCECompatible">
                <defName>DMS_SemiAutoRifle</defName>
                <statBases>
                    <WorkToMake>36000</WorkToMake>
                    <Mass>13.3</Mass>
                    <Bulk>13.12</Bulk>
                    <SwayFactor>2.02</SwayFactor>
                    <ShotSpread>0.03</ShotSpread>
                    <SightsEfficiency>1.3</SightsEfficiency>
                    <RangedWeapon_Cooldown>1.25</RangedWeapon_Cooldown>
                </statBases>
                <Properties>
                    <verbClass>CombatExtended.Verb_ShootCE</verbClass>
                    <hasStandardCommand>true</hasStandardCommand>
                    <defaultProjectile>Bullet_50BMG_FMJ</defaultProjectile>
                    <warmupTime>1.3</warmupTime>
                    <range>65</range>
                    <soundCast>Shot_TurretSniper</soundCast>
                    <soundCastTail>GunTail_Heavy</soundCastTail>
                    <muzzleFlashScale>9</muzzleFlashScale>
                    <recoilAmount>2.36</recoilAmount>
                </Properties>
                <AmmoUser>
                    <magazineSize>10</magazineSize>
                    <reloadTime>4</reloadTime>
                    <ammoSet>AmmoSet_50BMG</ammoSet>
                </AmmoUser>
                <FireModes>
                    <aiAimMode>AimedShot</aiAimMode>
                </FireModes>
                <weaponTags>
                    <li>CE_AI_SR</li>
                </weaponTags>
            </li>

            <!--==== Battle Rifle ====-->
            <li Class="CombatExtended.PatchOperationMakeGunCECompatible">
                <defName>DMS_BattleRifle</defName>
                <statBases>
                    <Mass>11.8</Mass>
                    <Bulk>12.7</Bulk>
                    <SwayFactor>2.26</SwayFactor>
                    <ShotSpread>0.11</ShotSpread>
                    <SightsEfficiency>1.2</SightsEfficiency>
                    <RangedWeapon_Cooldown>0.65</RangedWeapon_Cooldown>
                </statBases>
                <Properties>
                    <verbClass>CombatExtended.Verb_ShootCE</verbClass>
                    <hasStandardCommand>true</hasStandardCommand>
                    <defaultProjectile>Bullet_50BMG_FMJ</defaultProjectile>
                    <warmupTime>1.3</warmupTime>
                    <range>59</range>
                    <burstShotCount>4</burstShotCount>
				    <ticksBetweenBurstShots>8</ticksBetweenBurstShots>
                    <soundCast>Shot_AssaultRifle</soundCast>
                    <soundCastTail>GunTail_Medium</soundCastTail>
                    <muzzleFlashScale>9</muzzleFlashScale>
                    <recoilAmount>1.96</recoilAmount>
                </Properties>
                <AmmoUser>
                    <magazineSize>20</magazineSize>
                    <reloadTime>5.5</reloadTime>
                    <ammoSet>AmmoSet_50BMG</ammoSet>
                </AmmoUser>
                <FireModes>
                    <aiUseBurstMode>TRUE</aiUseBurstMode>
				    <aiAimMode>AimedShot</aiAimMode>
				    <aimedBurstShotCount>2</aimedBurstShotCount>
                </FireModes>
                <weaponTags>
                    <li>CE_AI_AR</li>
                </weaponTags>
            </li>

            <!--===== Anti-material rifle =====-->
            <li Class="CombatExtended.PatchOperationMakeGunCECompatible">
                <defName>DMS_AntiMaterialRifle</defName>
                <statBases>
                    <Mass>16.37</Mass>
                    <Bulk>15.74</Bulk>
                    <SwayFactor>1.84</SwayFactor>
                    <ShotSpread>0.02</ShotSpread>
                    <SightsEfficiency>3.05</SightsEfficiency>
                    <RangedWeapon_Cooldown>1.3</RangedWeapon_Cooldown>
                </statBases>
                <Properties>
                    <recoilAmount>2.77</recoilAmount>
                    <verbClass>CombatExtended.Verb_ShootCE</verbClass>
                    <hasStandardCommand>true</hasStandardCommand>
                    <defaultProjectile>Bullet_50BMG_FMJ</defaultProjectile>
                    <warmupTime>3.55</warmupTime>
                    <range>95</range>
                    <soundCast>DMS_MachineGunHeavy_Shot</soundCast>
                    <soundCastTail>GunTail_Heavy</soundCastTail>
                    <muzzleFlashScale>9</muzzleFlashScale>
                </Properties>
                <AmmoUser>
                    <magazineSize>10</magazineSize>
                    <reloadTime>5</reloadTime>
                    <ammoSet>AmmoSet_50BMG</ammoSet>
                </AmmoUser>
                <FireModes>
                    <aiAimMode>AimedShot</aiAimMode>
                </FireModes>
                <weaponTags>
                    <li>Bipod_DMR</li>
                    <li>CE_AI_SR</li>
                </weaponTags>
            </li>
            <li Class="PatchOperationReplace">
                <xpath>Defs/ThingDef[defName="DMS_AntiMaterialRifle"]/modExtensions/li[@Class="DMS.HeavyEquippableExtension"]</xpath>
                <value>
                    <li Class="DMS.HeavyEquippableExtension">
                        <EquippableDef>AverageHumanCanUse</EquippableDef>
                    </li>
                </value>
            </li>

            <!--===== sniper cannon =====-->
            <li Class="CombatExtended.PatchOperationMakeGunCECompatible">
                <defName>DMS_SniperCannon</defName>
                <statBases>
                    <Mass>40</Mass>
                    <Bulk>32.17</Bulk>
                    <SwayFactor>3.07</SwayFactor>
                    <ShotSpread>0.01</ShotSpread>
                    <SightsEfficiency>3.3</SightsEfficiency>
                    <RangedWeapon_Cooldown>1.8</RangedWeapon_Cooldown>
                </statBases>
                <Properties>
                    <recoilAmount>3.15</recoilAmount>
                    <verbClass>CombatExtended.Verb_ShootCE</verbClass>
                    <hasStandardCommand>true</hasStandardCommand>
                    <defaultProjectile>Bullet_30x173mmNATO_AP</defaultProjectile>
                    <warmupTime>3.75</warmupTime>
                    <range>95</range>
                    <soundCast>DMS_MachineGunHeavy_Shot</soundCast>
                    <soundCastTail>GunTail_Heavy</soundCastTail>
                    <muzzleFlashScale>20</muzzleFlashScale>
                </Properties>

                <AmmoUser>
                    <magazineSize>5</magazineSize>
                    <reloadTime>6</reloadTime>
                    <ammoSet>AmmoSet_30x173mmNATO</ammoSet>
                </AmmoUser>
                <FireModes>
                    <aiAimMode>AimedShot</aiAimMode>
                </FireModes>
                <weaponTags>
                    <li>Bipod_ATR</li>
                    <li>CE_AI_SR</li>
                </weaponTags>
            </li>

            <!--===== Automatic GL =====-->
            <li Class="CombatExtended.PatchOperationMakeGunCECompatible">
                <defName>DMS_AutomaticGrenadeLauncher</defName>
                <statBases>
                    <Mass>20.7</Mass>
                    <Bulk>15.5</Bulk>
                    <SwayFactor>1.46</SwayFactor>
                    <ShotSpread>0.16</ShotSpread>
                    <SightsEfficiency>1</SightsEfficiency>
                    <RangedWeapon_Cooldown>1.4</RangedWeapon_Cooldown>
                </statBases>
                <Properties>
                    <recoilAmount>3.03</recoilAmount>
                    <verbClass>CombatExtended.Verb_ShootCE</verbClass>
                    <hasStandardCommand>true</hasStandardCommand>
                    <defaultProjectile>Bullet_40x46mmGrenade_HE</defaultProjectile>
                    <burstShotCount>3</burstShotCount>
                    <ticksBetweenBurstShots>12</ticksBetweenBurstShots>
                    <warmupTime>1.85</warmupTime>
                    <range>40</range>
                    <minRange>5</minRange>
                    <soundCast>Shot_IncendiaryLauncher</soundCast>
                    <soundCastTail>GunTail_Medium</soundCastTail>
                    <muzzleFlashScale>12</muzzleFlashScale>
                    <targetParams>
                        <canTargetLocations>true</canTargetLocations>
                    </targetParams>
                </Properties>
                <AmmoUser>
                    <magazineSize>12</magazineSize>
                    <reloadTime>4.5</reloadTime>
                    <ammoSet>AmmoSet_40x46mmGrenade</ammoSet>
                </AmmoUser>
                <FireModes>
                    <aiAimMode>SuppressFire</aiAimMode>
                </FireModes>
                <weaponTags>
                    <li>CE_AI_AOE</li>
                </weaponTags>
            </li>

            <!--===== Light MG =====-->
            <li Class="CombatExtended.PatchOperationMakeGunCECompatible">
                <defName>DMS_LightMachineGun</defName>
                <statBases>
                    <Mass>12.75</Mass>
                    <Bulk>14.3</Bulk>
                    <SwayFactor>1.41</SwayFactor>
                    <ShotSpread>0.05</ShotSpread>
                    <SightsEfficiency>1</SightsEfficiency>
                    <RangedWeapon_Cooldown>0.46</RangedWeapon_Cooldown>
                </statBases>
                <Properties>
                    <recoilAmount>1.45</recoilAmount>
                    <verbClass>CombatExtended.Verb_ShootCE</verbClass>
                    <hasStandardCommand>true</hasStandardCommand>
                    <defaultProjectile>Bullet_338Lapua_FMJ</defaultProjectile>
                    <burstShotCount>10</burstShotCount>
                    <ticksBetweenBurstShots>5</ticksBetweenBurstShots>
                    <warmupTime>1.3</warmupTime>
                    <range>75</range>
                    <soundCast>DMS_MachineGunLight_Shot</soundCast>
                    <soundCastTail>GunTail_Medium</soundCastTail>
                    <muzzleFlashScale>9</muzzleFlashScale>
                    <targetParams>
                        <canTargetLocations>true</canTargetLocations>
                    </targetParams>
                </Properties>
                <AmmoUser>
                    <magazineSize>100</magazineSize>
                    <reloadTime>7.4</reloadTime>
                    <ammoSet>AmmoSet_338Lapua</ammoSet>
                </AmmoUser>
                <FireModes>
                    <aiAimMode>SuppressFire</aiAimMode>
                    <aimedBurstShotCount>5</aimedBurstShotCount>
                    <noSingleShot>true</noSingleShot>
                    <aiUseBurstMode>TRUE</aiUseBurstMode>
                </FireModes>
                <weaponTags>
                    <li>CE_AI_Suppressive</li>
                    <li>bipodSAW</li>
                </weaponTags>
            </li>

            <!--===== Heavy MG =====-->
            <li Class="CombatExtended.PatchOperationMakeGunCECompatible">
                <defName>DMS_HeavyMachineGun</defName>
                <statBases>
                    <Mass>32.4</Mass>
                    <Bulk>25.6</Bulk>
                    <SwayFactor>2.59</SwayFactor>
                    <ShotSpread>0.05</ShotSpread>
                    <SightsEfficiency>1.25</SightsEfficiency>
                    <RangedWeapon_Cooldown>0.46</RangedWeapon_Cooldown>
                </statBases>
                <Properties>
                    <recoilAmount>1.67</recoilAmount>
                    <verbClass>CombatExtended.Verb_ShootCE</verbClass>
                    <hasStandardCommand>true</hasStandardCommand>
                    <defaultProjectile>Bullet_50BMG_FMJ</defaultProjectile>
                    <burstShotCount>8</burstShotCount>
                    <ticksBetweenBurstShots>7</ticksBetweenBurstShots>
                    <warmupTime>1.55</warmupTime>
                    <range>75</range>
                    <soundCast>DMS_MachineGunHeavy_Shot</soundCast>
                    <soundCastTail>GunTail_Medium</soundCastTail>
                    <muzzleFlashScale>14</muzzleFlashScale>
                    <targetParams>
                        <canTargetLocations>true</canTargetLocations>
                    </targetParams>
                    <recoilPattern>Mounted</recoilPattern>
                </Properties>
                <AmmoUser>
                    <magazineSize>80</magazineSize>
                    <reloadTime>7.8</reloadTime>
                    <ammoSet>AmmoSet_50BMG</ammoSet>
                </AmmoUser>
                <FireModes>
                    <aiAimMode>AimedShot</aiAimMode>
                    <aimedBurstShotCount>4</aimedBurstShotCount>
                    <!--<noSingleShot>false</noSingleShot>-->
                    <aiUseBurstMode>TRUE</aiUseBurstMode>
                </FireModes>
                <weaponTags>
                    <li>CE_AI_Suppressive</li>
                    <li>Bipod_LMG</li>
                </weaponTags>
            </li>
            
            <!--===== LAC/Autocannon =====-->
            <li Class="CombatExtended.PatchOperationMakeGunCECompatible">
                <defName>DMS_Autocannon</defName>
                <statBases>
                    <Mass>73</Mass>
                    <Bulk>41.34</Bulk>
                    <SwayFactor>3.12</SwayFactor>
                    <ShotSpread>0.04</ShotSpread>
                    <SightsEfficiency>1</SightsEfficiency>
                    <RangedWeapon_Cooldown>1.85</RangedWeapon_Cooldown>
                </statBases>
                <Properties>
                    <recoilAmount>1.87</recoilAmount>
                    <verbClass>CombatExtended.Verb_ShootCE</verbClass>
                    <hasStandardCommand>true</hasStandardCommand>
                    <defaultProjectile>Bullet_20x102mmNATO_AP</defaultProjectile>
                    <burstShotCount>6</burstShotCount>
                    <ticksBetweenBurstShots>10</ticksBetweenBurstShots>
                    <warmupTime>2.1</warmupTime>
                    <range>78</range>
                    <soundCast>DMS_MachineGunHeavy_Shot</soundCast>
                    <soundCastTail>GunTail_Heavy</soundCastTail>
                    <muzzleFlashScale>20</muzzleFlashScale>
                </Properties>
                <AmmoUser>
                    <magazineSize>60</magazineSize>
                    <reloadTime>9</reloadTime>
                    <ammoSet>AmmoSet_20x102mmNATO</ammoSet>
                </AmmoUser>
                <FireModes>
                    <aiUseBurstMode>TRUE</aiUseBurstMode>
                    <aiAimMode>AimedShot</aiAimMode>
                    <aimedBurstShotCount>3</aimedBurstShotCount>
                    <!--<noSingleShot>false</noSingleShot>-->
                </FireModes>
                <weaponTags>
                    <li>CE_AI_Suppressive</li>
                </weaponTags>
            </li>

            <!--====Machete====-->
            <li Class="PatchOperationReplace">
                <xpath>Defs/ThingDef[defName="DMS_Machete"]/tools</xpath>
                <value>
                    <tools>
                        <li Class="CombatExtended.ToolCE">
                            <label>handle</label>
			                <capacities>
				               <li>Poke</li>
			                </capacities>
			                <power>4</power>
			                <cooldownTime>1.78</cooldownTime>
			                <chanceFactor>0.10</chanceFactor>
			                <armorPenetrationBlunt>2.0</armorPenetrationBlunt>
			                <linkedBodyPartsGroup>Handle</linkedBodyPartsGroup>
			            </li>
                        <li Class="CombatExtended.ToolCE">
			                <label>edge</label>
			                <capacities>
			                   <li>Cut</li>
			                </capacities>
			                <power>40</power>
			                <cooldownTime>1.64</cooldownTime>
			                <armorPenetrationBlunt>6.48</armorPenetrationBlunt>
			                <armorPenetrationSharp>16</armorPenetrationSharp>
			                <linkedBodyPartsGroup>Edge</linkedBodyPartsGroup>
                        </li>
                        <li Class="CombatExtended.ToolCE">
			                <label>point</label>
			                <capacities>
				                <li>Stab</li>
			                </capacities>
			                <power>18</power>
			                <cooldownTime>1.78</cooldownTime>
			                <armorPenetrationBlunt>2.0</armorPenetrationBlunt>
                            <armorPenetrationSharp>10</armorPenetrationSharp>
                        </li>
                    </tools>
                </value>
            </li>
            <li Class="PatchOperationReplace">
                <xpath>Defs/ThingDef[defName="DMS_Machete"]/statBases/Mass</xpath>
                <value>
                    <Mass>6.3</Mass>
                </value>
            </li>
            <li Class="PatchOperationAdd">
                <xpath>Defs/ThingDef[defName="DMS_Machete"]/statBases</xpath>
                <value>
		          <Bulk>8</Bulk>
		          <MeleeCounterParryBonus>0.53</MeleeCounterParryBonus>
                </value>
            </li>
            <li Class="PatchOperationAdd">
                <xpath>Defs/ThingDef[defName="DMS_Machete"]</xpath>
                <value>
                    <equippedStatOffsets>
			          <MeleeCritChance>0.28</MeleeCritChance>
			          <MeleeParryChance>0.35</MeleeParryChance>
			          <MeleeDodgeChance>0.39</MeleeDodgeChance>
                    </equippedStatOffsets>
                </value>
            </li>
            <li Class="PatchOperationAdd">
                <xpath>Defs/ThingDef[defName="DMS_Machete"]/weaponTags</xpath>
                <value>
                    <li>CE_OneHandedWeapon</li>
                </value>
            </li>

            <!--====DMS_StunBaton====-->
            <li Class="PatchOperationReplace">
                <xpath>Defs/ThingDef[defName="DMS_StunBaton"]/tools</xpath>
                <value>
                    <tools>
                        <li Class="CombatExtended.ToolCE">
                            <label>handle</label>
                            <capacities>
                                <li>Blunt</li>
                            </capacities>
                            <power>2</power>
                            <chanceFactor>0.1</chanceFactor>
                            <cooldownTime>1.54</cooldownTime>
                            <armorPenetrationBlunt>0.5</armorPenetrationBlunt>
                            <linkedBodyPartsGroup>Handle</linkedBodyPartsGroup>
                        </li>
                        <li Class="CombatExtended.ToolCE">
                            <label>edge</label>
                            <capacities>
                                <li>Blunt</li>
                            </capacities>
                            <power>16</power>
                            <cooldownTime>1.36</cooldownTime>
                            <armorPenetrationBlunt>8.68</armorPenetrationBlunt>
                            <linkedBodyPartsGroup>Edge</linkedBodyPartsGroup>
                            <extraMeleeDamages>
                                <li>
                                    <def>EMP</def>
                                    <amount>6</amount>
                                </li>
                            </extraMeleeDamages>
                        </li>
                        <li Class="CombatExtended.ToolCE">
                            <label>point</label>
                            <capacities>
                                <li>Blunt</li>
                            </capacities>
                            <power>10</power>
                            <cooldownTime>1.84</cooldownTime>
                            <armorPenetrationBlunt>3.28</armorPenetrationBlunt>
                            <extraMeleeDamages>
                                <li>
                                    <def>EMP</def>
                                    <amount>15</amount>
                                </li>
                            </extraMeleeDamages>
                        </li>
                    </tools>
                </value>
            </li>
            <li Class="PatchOperationReplace">
                <xpath>Defs/ThingDef[defName="DMS_StunBaton"]/statBases/Mass</xpath>
                <value>
                    <Mass>2.3</Mass>
                </value>
            </li>
            <li Class="PatchOperationAdd">
                <xpath>Defs/ThingDef[defName="DMS_StunBaton"]/statBases</xpath>
                <value>
                    <Bulk>1.4</Bulk>
                    <MeleeCounterParryBonus>0.43</MeleeCounterParryBonus>
                </value>
            </li>
            <li Class="PatchOperationAdd">
                <xpath>Defs/ThingDef[defName="DMS_StunBaton"]</xpath>
                <value>
                    <equippedStatOffsets>
                        <MeleeCritChance>1.46</MeleeCritChance>
                        <MeleeParryChance>0.25</MeleeParryChance>
                        <MeleeDodgeChance>0.20</MeleeDodgeChance>
                    </equippedStatOffsets>
                </value>
            </li>
            <li Class="PatchOperationAdd">
                <xpath>Defs/ThingDef[defName="DMS_StunBaton"]/weaponTags</xpath>
                <value>
                    <li>CE_OneHandedWeapon</li>
                </value>
            </li>

            <!--===== Door Breaker =====-->
            <li Class="CombatExtended.PatchOperationMakeGunCECompatible">
                <defName>DMS_DoorBreaker</defName>
                <statBases>
                    <Mass>24.8</Mass>
                    <Bulk>16.8</Bulk>
                    <SwayFactor>1.74</SwayFactor>
                    <ShotSpread>0.14</ShotSpread>
                    <SightsEfficiency>1.25</SightsEfficiency>
                    <RangedWeapon_Cooldown>1.4</RangedWeapon_Cooldown>
                </statBases>
                <Properties>
                    <verbClass>CombatExtended.Verb_ShootCE</verbClass>
                    <hasStandardCommand>true</hasStandardCommand>
                    <defaultProjectile>Bullet_RPG32Rocket_Thermobaric</defaultProjectile>
                    <warmupTime>3.35</warmupTime>
                    <range>43</range>
                    <minRange>6</minRange>
                    <targetParams>
                        <canTargetLocations>true</canTargetLocations>
                    </targetParams>
                    <soundCast>InfernoCannon_Fire</soundCast>
                    <soundCastTail>GunTail_Heavy</soundCastTail>
                    <muzzleFlashScale>16</muzzleFlashScale>
                    <ai_AvoidFriendlyFireRadius>5</ai_AvoidFriendlyFireRadius>
                    <ai_IsBuildingDestroyer>true</ai_IsBuildingDestroyer>
                </Properties>
                <AmmoUser>
                    <magazineSize>1</magazineSize>
                    <reloadTime>7.2</reloadTime>
                    <ammoSet>AmmoSet_RPG32Rocket</ammoSet>
                </AmmoUser>
                <FireModes>
                    <aiUseBurstMode>FALSE</aiUseBurstMode>
                    <aiAimMode>AimedShot</aiAimMode>
                </FireModes>
                <weaponTags>
                    <li>CE_AI_Launcher</li>
                    <li>NoSwitch</li>
                </weaponTags>
            </li>
            <!--custom demolish tool for door breaker-->
            <li Class="PatchOperationReplace">
                <xpath>Defs/ThingDef[defName="DMS_DoorBreaker"]/tools</xpath>
                <value>
                    <tools Inherit="False">
                        <li Class="CombatExtended.ToolCE">
                            <label>barrel</label>
                            <capacities>
                                <li>Blunt</li>
                            </capacities>
                            <power>18</power>
                            <cooldownTime>2.65</cooldownTime>
                            <armorPenetrationBlunt>7.3</armorPenetrationBlunt>
                            <linkedBodyPartsGroup>Barrel</linkedBodyPartsGroup>
                        </li>
                        <li Class="CombatExtended.ToolCE">
                            <label>head</label>
                            <capacities>
                                <li>Demolish</li>
                            </capacities>
                            <power>51</power>
                            <cooldownTime>3.85</cooldownTime>
                            <armorPenetrationBlunt>31.7</armorPenetrationBlunt>
                            <linkedBodyPartsGroup>Head</linkedBodyPartsGroup>
                        </li>
                    </tools>
                </value>
            </li>
        </operations>
    </Operation>
</Patch>
