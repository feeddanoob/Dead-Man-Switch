<?xml version="1.0" encoding="utf-8"?>
<Defs>
  
  <ThingDef ParentName="BaseAutomatroidRace">
    <defName>DMS_Mech_Tarbosaurus</defName>
    <label>Tarbosaurus</label>
    <description>A bipedal ultra heavy automatoid nicknamed the "Armored Rex" as its distinctive body structure vaguely resembles a carnotaurus. Once seen as the nextgen war-changer in the twilight of the arms races in the early spacer era, it uses artificial muscle fibres to drive its oversized legs.\n\nWhile it failed to change the field of modern warfare as expected, there are still numerous manufacturers replicating it and adding their own improvements to the design. As such, traces of technology adopted in this automatroid can be seen in a great number of weaponry.</description>
    <statBases>
      <MoveSpeed>4</MoveSpeed>
      <ArmorRating_Sharp>1.8</ArmorRating_Sharp><!--銳抗-->
      <ArmorRating_Blunt>1.2</ArmorRating_Blunt><!--鈍抗-->
      <ArmorRating_Heat>2</ArmorRating_Heat>  <!--能抗-->
      <StaggerDurationFactor>0</StaggerDurationFactor>
      <ShootingAccuracyPawn>4</ShootingAccuracyPawn>
      <BandwidthCost MayRequire="Ludeon.Rimworld.Biotech">8</BandwidthCost>        <!--帶寬消耗-->
      <WastepacksPerRecharge MayRequire="Ludeon.Rimworld.Biotech">4</WastepacksPerRecharge><!--充電/培養時產出廢料-->
    </statBases>
    <race>
      <body>DMS_Bipedal</body>
      <nameGenerator>DMS_VanguardMechHeavy</nameGenerator>
      <baseBodySize>3.5</baseBodySize>
      <baseHealthScale>5.7</baseHealthScale>
      <mechWeightClass>UltraHeavy</mechWeightClass>
    </race>
    <comps>
		  <li Class="DMS.CompProperties_VehicleWeapon">
        <drawData>
          <dataEast>
              <offset>(-0.2,0,0.9)</offset>
              <layer>-20</layer>
          </dataEast>
          <dataWest>
              <offset>(0.2,0,-0.4)</offset>
          </dataWest>
          <dataSouth>
              <offset>(0.9,0,0)</offset>
          </dataSouth>
          <dataNorth>
              <offset>(-0.9,0,0)</offset>
          </dataNorth>
        </drawData>
			  <turretRotationFollowPawn>true</turretRotationFollowPawn>			  
        <rotationSmoothTime>0.12</rotationSmoothTime>
      </li>
		  <li Class="DMS.CompPropertiesMultipleTurretGun">
          <subTurrets>
            <li>
              <ID>heavy machinegun</ID>
              <turret>DMS_HeavyMachineGunMounted</turret>
              <autoAttack>true</autoAttack>
              <command_ToggleFire>Fire at will</command_ToggleFire>
              <commandDesc_ToggleFire>Toggle turret to manual control mode to prevent unnecessary shooting.</commandDesc_ToggleFire>
              <command_Target>Aim at a target</command_Target>
              <commandDesc_Target>Aim at a desinated target</commandDesc_Target>
              <warmingTime>5</warmingTime>
              <targetCommandIconPath>UI/Gizmos/ToggleTurret</targetCommandIconPath>
              <angleOffset>-90</angleOffset>
              <renderNodeProperties>
                <li>
                  <nodeClass>DMS.PawnRenderNode_SubTurretGun</nodeClass>
                  <workerClass>DMS.PawnRenderNodeWorker_SubTurretGun</workerClass>
                  <parentTagDef>Body</parentTagDef>
                  <drawSize>1.75</drawSize>
                  <baseLayer>-21</baseLayer>
                  <pawnType>Any</pawnType>
                  <drawData>
                    <dataEast>
                        <offset>(1,0,-0.35)</offset>
                    </dataEast>
                    <dataWest>
                        <offset>(-1.0,0,-0.35)</offset>
                        <rotationOffset>180</rotationOffset>
                    </dataWest>
                    <dataSouth>
                        <offset>(0,0,-1.2)</offset>
                    </dataSouth>
                    <dataNorth>
                        <offset>(0,0,0.5)</offset>
                    </dataNorth>
                  </drawData>
                </li>
              </renderNodeProperties>
            </li>
            <li>
              <ID>close inbound system</ID>
              <turret>DMS_ShotgunGunMounted</turret>
              <autoAttack>true</autoAttack>
              <command_ToggleFire>Fire at will</command_ToggleFire>
              <commandDesc_ToggleFire>Toggle turret to manual control mode to prevent unnecessary shooting.</commandDesc_ToggleFire>
              <command_Target>Aim at a target</command_Target>
              <commandDesc_Target>Aim at a desinated target</commandDesc_Target>
              <warmingTime>2</warmingTime>
              <targetCommandIconPath>UI/Gizmos/ToggleTurret</targetCommandIconPath>
              <angleOffset>-90</angleOffset>
              <renderNodeProperties>
                <li>
                  <nodeClass>DMS.PawnRenderNode_SubTurretGun</nodeClass>
                  <workerClass>DMS.PawnRenderNodeWorker_SubTurretGun</workerClass>
                  <parentTagDef>Body</parentTagDef>
                  <drawSize>0.5</drawSize>
                  <baseLayer>20</baseLayer>
                  <pawnType>Any</pawnType>
                  <drawData>
                    <dataEast>
                        <offset>(-0.15,0,-0.75)</offset>
                    </dataEast>
                    <dataWest>
                        <offset>(0.15,0,0.5)</offset>
                        <layer>-22</layer>
                        <rotationOffset>180</rotationOffset>
                    </dataWest>
                    <dataSouth>
                        <offset>(-0.9,0,-0.05)</offset>
                        <rotationOffset>10</rotationOffset>
                    </dataSouth>
                    <dataNorth>
                        <offset>(1,0,-0.25)</offset>
                        <rotationOffset>10</rotationOffset>
                    </dataNorth>
                  </drawData>
                </li>
              </renderNodeProperties>
            </li>
          </subTurrets>
      </li>
    </comps>
    <modExtensions>
      <li Class="DMS.MechWeaponExtension">
        <EnableWeaponFilter>true</EnableWeaponFilter>
        <UsableWeaponTags>
          <li MayRequire="vanillaexpanded.vwehw">HeavyGun</li><!--重型武器拓展-->
          <li>DMS_Tarbosaurus_Gun</li>
          <li>DMS_MechWeaponUltraHeavy</li>
          <li>DMS_MechWeaponHeavy</li>
          <li>H_Gatling20mm</li>
          <li>V_Gatling30mm</li>
        </UsableWeaponTags>
        <EnableTechLevelFilter>true</EnableTechLevelFilter>
        <UsableTechLevels>
          <li>Industrial</li>
        </UsableTechLevels>
      </li>
    </modExtensions>
    <tools Inherit="False">
      <li>
        <label>Mechanical Head</label>
        <capacities>
          <li>Blunt</li>
        </capacities>
        <power>35</power>
        <cooldownTime>5.5</cooldownTime>
        <linkedBodyPartsGroup>HeadAttackTool</linkedBodyPartsGroup>
        <ensureLinkedBodyPartsGroupAlwaysUsable>true</ensureLinkedBodyPartsGroupAlwaysUsable>
        <chanceFactor>0.08</chanceFactor>
		    <surpriseAttack>
          <extraMeleeDamages>
            <li>
              <def>Stun</def>
              <amount>20</amount>
            </li>
          </extraMeleeDamages>
        </surpriseAttack>
      </li>
      <li>
        <label>Left Leg</label>
        <capacities>
          <li>Blunt</li>
        </capacities>
        <power>24</power>
        <cooldownTime>3.5</cooldownTime>
        <linkedBodyPartsGroup>LeftMechanicalLeg</linkedBodyPartsGroup>
        <ensureLinkedBodyPartsGroupAlwaysUsable>true</ensureLinkedBodyPartsGroupAlwaysUsable>
        <chanceFactor>0.2</chanceFactor>
		    <surpriseAttack>
          <extraMeleeDamages>
            <li>
              <def>Stun</def>
              <amount>16</amount>
            </li>
          </extraMeleeDamages>
        </surpriseAttack>
      </li>
      <li>
        <label>Right Leg</label>
        <capacities>
          <li>Blunt</li>
        </capacities>
        <power>24</power>
        <cooldownTime>3.5</cooldownTime>
        <linkedBodyPartsGroup>RightMechanicalLeg</linkedBodyPartsGroup>
        <ensureLinkedBodyPartsGroupAlwaysUsable>true</ensureLinkedBodyPartsGroupAlwaysUsable>
        <chanceFactor>0.2</chanceFactor>
		    <surpriseAttack>
          <extraMeleeDamages>
            <li>
              <def>Stun</def>
              <amount>16</amount>
            </li>
          </extraMeleeDamages>
        </surpriseAttack>
      </li>
    </tools>
    <damageMultipliers>
      <li>
        <damageDef>Blunt</damageDef>
        <multiplier>0.6</multiplier>
      </li>
      <li>
        <damageDef>Bomb</damageDef>
        <multiplier>0.5</multiplier>
      </li>
    </damageMultipliers>
    <butcherProducts>
      <Tungsteel>60</Tungsteel>
      <ComponentStamped>3</ComponentStamped>
    </butcherProducts>
    <killedLeavingsPlayerHostile>
      <ComponentFireControl>1</ComponentFireControl>
    </killedLeavingsPlayerHostile>
    <castEdgeShadows>false</castEdgeShadows>
    <staticSunShadowHeight>0</staticSunShadowHeight>
  </ThingDef>

  <PawnKindDef ParentName="BaseAutomatroidKind">
    <defName>DMS_Mech_Tarbosaurus</defName>
    <label>tarbosaurus</label>
    <race>DMS_Mech_Tarbosaurus</race>
    <isFighter>true</isFighter>
    <combatPower>500</combatPower>                                               <!--威脅點數-->
    <maxPerGroup>2</maxPerGroup>                                                 <!--單個集群內的數量-->
    <isBoss>true</isBoss>
    <!--
    <techHediffsRequired>
      <li>DMS_CeramicsPlating</li>
    </techHediffsRequired>-->
    <lifeStages>                                                                 <!--身體圖片-->
      <li>
        <bodyGraphicData>
          <texPath>Things/Automatroid/tarbosaurus</texPath>
          <shaderType>CutoutComplex</shaderType>
          <graphicClass>Graphic_Multi</graphicClass>
          <drawSize>4</drawSize>
          <shadowData>
            <volume>(1.25,1,1.25)</volume>
            <offset>(0,0,-0.5)</offset>
          </shadowData>
        </bodyGraphicData>
      </li>
      <li>
        <bodyGraphicData>
          <texPath>Things/Automatroid/OldTexture/tarbosaurus</texPath>
          <shaderType>CutoutComplex</shaderType>
          <graphicClass>Graphic_Multi</graphicClass>
          <drawSize>4</drawSize>
          <shadowData>
            <volume>(1.25,1,1.25)</volume>
            <offset>(0,0,-0.5)</offset>
          </shadowData>
        </bodyGraphicData>
      </li>
    </lifeStages>
    <weaponTags>
      <li>DMS_MechWeaponUltraHeavy</li>
    </weaponTags>
    <weaponMoney>9999~9999</weaponMoney>
    <abilities>
      <li>DMS_TarbosaurusJump</li>
      <li>DMS_RepairMode</li>
    </abilities>
  </PawnKindDef>

</Defs>